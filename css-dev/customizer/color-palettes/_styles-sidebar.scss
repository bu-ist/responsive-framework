$use-background-colors: map-get( $current-palette, 'use-background-colors' );

$sidebar-bg: lighten( $color-primary, 10% );
$sidebar-widget-title: accessible-text( #fff, $sidebar-bg );
$sidebar-border: lighten( $sidebar-bg, 80% );
$sidebar-text: accessible-text( lighten( $sidebar-bg, 70% ), $sidebar-bg );
$sidebar-link: accessible-text( $sidebar-bg, $color-tertiary );
$sidebar-link-hover: accessible-text( $sidebar-bg, #fff );

@if lightness( $color-primary ) > 30% {
	$sidebar-bg: darken( $color-primary, 10% );
}

@if $use-background-colors {
	$sidebar-widget-title: accessible-text( $sidebar-bg, #fff );
	$sidebar-border: lighten( $sidebar-bg, 20% );
	$sidebar-text: accessible-text( $sidebar-bg, lighten( $sidebar-bg, 70% ) );
}

@media screen {
	@if $use-background-colors {
		.widget {
			background: $sidebar-bg;
			padding: 24px;
		}

		.footbar .widget {
			background: transparent;
			padding: 0;
		}
	}

	// widget border color
	.widget-title,
	#contentnav ul,
	#contentnav li,
	.widget_nav_menu ul,
	.widget_nav_menu li,
	.widget-calendar-event,
	.month,
	.widget-calendar-picker th,
	.widget-calendar-picker td,
	.widget_links li,
	.widget_archive li {
		border-color: $sidebar-border;
	}

	// text color
	.widget,
	.widget-calendar-picker th,
	.widget-calendar-picker caption {
		color: $sidebar-text;
	}

	// link color
	.widget a,
	#contentnav li a,
	.widget_nav_menu li a,
	#contentnav li.current_page_item > a,
	.widget_nav_menu li.current_page_item > a {
		color: $sidebar-link;

		&:hover,
		&:focus {
			color: $sidebar-link-hover;
		}
	}


	// Widget Titles
	.widget-title,
	.widget-title a {
		color: $sidebar-widget-title;
	}

	// buttons
	.widget a.button,
	.widget a.button-primary {
		background: $color-secondary;
		color: accessible-text( $color-secondary, #000 );

		&:hover,
		&:focus {
			color: accessible-text( $color-secondary, #000 );
		}
	}
}
